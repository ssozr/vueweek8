import{_ as C,R as M,M as $,r as w,o as n,c,a as t,F as g,g as m,e as k,t as l,b as D,w as y,d as x}from"./index-093265a8.js";import{S as u}from"./sweetalert2.all-281a79b7.js";const{VITE_URL:r,VITE_PATH:h}={VITE_PATH:"ssozr",VITE_URL:"https://vue3-course-api.hexschool.io/",BASE_URL:"/vueweek8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},I={data(){return{cartData:[],dalModal:"",delData:{},delId:"",disabled:!1}},components:{RouterLink:M},methods:{getCartData(){this.$http.get(`${r}/v2/api/${h}/cart`).then(o=>{console.log(o),this.cartData=o.data.data}).catch(o=>{console.log(o)})},openDelModal(o){this.deldata={},this.delModal.show(),this.delId=o.id,this.delData=o.product,console.log(this.delData)},openDelAllModal(){this.delData={},this.delId="",this.delData.title="全部商品",this.delModal.show()},delCart(){this.delId?this.$http.delete(`${r}/v2/api/${h}/cart/${this.delId}`).then(o=>{console.log(o),this.delData={},this.delId="",this.delModal.hide(),this.getCartData(),u.fire(`${o.data.message}`)}).catch(o=>{console.log(o)}):this.$http.delete(`${r}/v2/api/${h}/carts`).then(o=>{console.log(o),this.delData={},this.delId="",this.delModal.hide(),this.getCartData(),u.fire(`${o.data.message}`)}).catch(o=>{console.log(o)})},changeQty(o,e){console.log(o,e),this.disabled=!0;const p={product_id:e,qty:o};this.$http.put(`${r}/v2/api/${h}/cart/${e}`,{data:p}).then(d=>{console.log(d),u.fire(`${d.data.message}`),this.disabled=!1,this.getCartData()}).catch(d=>{console.log(d)})}},mounted(){this.getCartData(),this.delModal=new $(this.$refs.delModal)}},V={class:"container p-0"},R={class:"row"},E={class:"table align-middle"},T={class:"text-center"},L=t("th",{scope:"col"},"課程名稱",-1),B=t("th",{scope:"col"},"授課老師",-1),S=t("th",{scope:"col"},"總課程數",-1),A=t("th",{scope:"col"},"購買數量",-1),N=t("th",{scope:"col"},"價格",-1),q={scope:"col"},O={class:"fs-5"},P={class:"dropdown"},U=["disabled"],F={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},H=["onClick"],Q=["onClick"],z={class:"text-center"},j=t("td",null,null,-1),G=t("td",null,null,-1),J=t("td",null,null,-1),K=t("td",null,null,-1),W={class:"align-bottom"},X={class:"border-bottom border-primary border-3 mb-0"},Y={class:"ms-1"},Z=t("button",{type:"button",class:"btn btn-primary fs-3"},"結帳",-1),tt={class:"modal",tabindex:"-1",ref:"delModal"},ot={class:"modal-dialog"},st={class:"modal-content"},et={class:"modal-header"},lt={key:0,class:"modal-title"},at=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),dt=t("div",{class:"modal-body"},[t("p",null,"確定移出購物車?")],-1),nt={class:"modal-footer"},ct=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);function it(o,e,p,d,a,i){const b=w("RouterLink");return n(),c("div",V,[t("div",R,[t("table",E,[t("thead",null,[t("tr",T,[L,B,S,A,N,t("th",q,[t("button",{type:"button",class:"btn btn-primary rounded-pill",onClick:e[0]||(e[0]=s=>i.openDelAllModal())},"清空購物車")])])]),t("tbody",null,[(n(!0),c(g,null,m(a.cartData.carts,(s,f)=>(n(),c("tr",{key:f,class:"text-center"},[t("td",null,[D(b,{to:`/class/${s.product.id}`},{default:y(()=>[t("h2",O,l(s.product.title),1)]),_:2},1032,["to"])]),t("td",null,l(s.product.unit),1),t("td",null,l(s.product.origin_price*s.qty)+"堂",1),t("td",null,[t("div",P,[t("button",{disabled:a.disabled,class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},l(s.qty),9,U),t("ul",F,[(n(),c(g,null,m(20,(_,v)=>t("li",{key:v},[t("a",{onClick:rt=>i.changeQty(_,s.id),class:"dropdown-item"},l(_),9,H)])),64))])])]),t("td",null,l(s.total),1),t("td",null,[t("button",{type:"button",class:"btn btn-primary rounded-pill",onClick:_=>i.openDelModal(s)},"刪除",8,Q)])]))),128)),t("tr",z,[j,G,J,K,t("td",W,[t("h2",X,[k("總金額:NT "),t("span",Y,l(a.cartData.total),1)])]),t("td",null,[D(b,{to:"/Order"},{default:y(()=>[Z]),_:1})])])])])]),t("div",tt,[t("div",ot,[t("div",st,[t("div",et,[a.delData.title?(n(),c("h5",lt,l(a.delData.title),1)):x("",!0),at]),dt,t("div",nt,[ct,t("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=s=>i.delCart(a.delData.id))},"確認移出")])])])],512)])}const ut=C(I,[["render",it]]);export{ut as default};
