import{_ as D,M as f,o as n,c,a as t,n as p,F as b,g as m,e as w,t as o,d as C}from"./index-093265a8.js";import{S as g}from"./sweetalert2.all-281a79b7.js";const{VITE_URL:_,VITE_PATH:h}={VITE_PATH:"ssozr",VITE_URL:"https://vue3-course-api.hexschool.io/",BASE_URL:"/vueweek8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},M={data(){return{cartData:[],dalModal:"",delData:{},delId:"",disabled:!1}},methods:{nextBtn(){this.num++},preBtn(){this.num--},getCartData(){this.$http.get(`${_}/v2/api/${h}/cart`).then(s=>{console.log(s),this.cartData=s.data.data}).catch(s=>{console.log(s)})},openDelModal(s){this.deldata={},this.delModal.show(),this.delId=s.id,this.delData=s.product},delCart(){this.$http.delete(`${_}/v2/api/${h}/cart/${this.delId}`).then(s=>{console.log(s),this.delData={},this.delId="",this.delModal.hide(),this.getCartData(),g.fire(`${s.data.message}`)}).catch(s=>{console.log(s)})},changeQty(s,a){this.disabled=!0;const u={product_id:a,qty:s};this.$http.put(`${_}/v2/api/${h}/cart/${a}`,{data:u}).then(d=>{console.log(d),g.fire(`${d.data.message}`),this.disabled=!1,this.getCartData()}).catch(d=>{console.log(d)})}},mounted(){this.getCartData(),this.delModal=new f(this.$refs.delModal)}},$={class:"container-fuli"},k={class:"row"},x={class:"order-progress pt-4"},V=t("li",{class:"active"},"填寫資料",-1),B={class:"container-md container-fuli d-none"},E={class:"row"},I=t("h2",{class:"text-center"},"訂單確認",-1),T={class:"row"},S={class:"table align-middle"},R=t("thead",null,[t("tr",{class:"text-center"},[t("th",{scope:"col"},"課程名稱"),t("th",{scope:"col"},"授課老師"),t("th",{scope:"col"},"總課程數"),t("th",{scope:"col"},"購買數量"),t("th",{scope:"col"},"價格"),t("th")])],-1),L={class:"dropdown"},N=["disabled"],O={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},q=["onClick"],A=["onClick"],P={class:"text-center"},U=t("td",null,null,-1),z=t("td",null,null,-1),F=t("td",null,null,-1),H=t("td",null,null,-1),Q=t("td",null,null,-1),j={class:"align-bottom"},G={class:"border-bottom border-primary border-3 mb-0"},J={class:"ms-1"},K={class:"modal",tabindex:"-1",ref:"delModal"},W={class:"modal-dialog"},X={class:"modal-content"},Y={class:"modal-header"},Z={key:0,class:"modal-title"},tt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),st=t("div",{class:"modal-body"},[t("p",null,"確定移出購物車?")],-1),et={class:"modal-footer"},ot=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);function lt(s,a,u,d,l,i){return n(),c("div",$,[t("div",k,[t("ul",x,[V,t("li",{class:p({active:s.num>=2})},"訂單確認",2),t("li",{class:p({active:s.num>=3})},"完成訂單",2)])]),t("div",B,[t("div",E,[I,t("div",T,[t("table",S,[R,t("tbody",null,[(n(!0),c(b,null,m(l.cartData.carts,(e,v)=>(n(),c("tr",{key:v,class:"text-center"},[t("td",null,[t("h2",null,o(e.product.title),1)]),t("td",null,o(e.product.unit),1),t("td",null,o(e.product.origin_price*e.qty)+"堂",1),t("td",null,[t("div",L,[t("button",{disabled:l.disabled,class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},o(e.qty),9,N),t("ul",O,[(n(),c(b,null,m(20,(r,y)=>t("li",{key:y},[t("a",{onClick:at=>i.changeQty(r,e.id),class:"dropdown-item"},o(r),9,q)])),64))])])]),t("td",null,o(e.total),1),t("td",null,[t("button",{type:"button",class:"btn btn-primary rounded-pill",onClick:r=>i.openDelModal(e)},"刪除",8,A)])]))),128)),t("tr",P,[U,z,F,H,Q,t("td",j,[t("h2",G,[w("總金額:NT "),t("span",J,o(l.cartData.total),1)])])])])]),t("div",K,[t("div",W,[t("div",X,[t("div",Y,[l.delData.title?(n(),c("h5",Z,o(l.delData.title),1)):C("",!0),tt]),st,t("div",et,[ot,t("button",{type:"button",class:"btn btn-primary",onClick:a[0]||(a[0]=e=>i.delCart(l.delData.id))},"確認移出")])])])],512)])])])])}const ct=D(M,[["render",lt]]);export{ct as default};
