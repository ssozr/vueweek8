import{_ as V,r as i,o as d,h as M,w as k,b as _,n as m,M as S,c as r,a as t,F as D,g as w,e as x,t as a,d as E}from"./index-aba4c9b7.js";import{S as C}from"./sweetalert2.all-281a79b7.js";const B={data(){return{user:{email:""}}}};function I(e,l,h,n,o,u){const p=i("v-field"),b=i("error-message"),v=i("v-form");return d(),M(v,{onSubmit:e.onSubmit},{default:k(({errors:s})=>[_(p,{id:"email",name:"email",type:"email",class:m(["form-control",{"is-invalid":s.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:o.user.email,"onUpdate:modelValue":l[0]||(l[0]=c=>o.user.email=c)},null,8,["class","modelValue"]),_(b,{name:"email",class:"invalid-feedback"})]),_:1},8,["onSubmit"])}const T=V(B,[["render",I]]);const{VITE_URL:g,VITE_PATH:y}={VITE_PATH:"ssozr",VITE_URL:"https://vue3-course-api.hexschool.io/",BASE_URL:"/vueweek8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},q={data(){return{cartData:[],dalModal:"",delData:{},delId:"",disabled:!1,user:{email:""}}},components:{ab:T},methods:{nextBtn(){this.num++},preBtn(){this.num--},getCartData(){this.$http.get(`${g}/v2/api/${y}/cart`).then(e=>{console.log(e),this.cartData=e.data.data}).catch(e=>{console.log(e)})},openDelModal(e){this.deldata={},this.delModal.show(),this.delId=e.id,this.delData=e.product},delCart(){this.$http.delete(`${g}/v2/api/${y}/cart/${this.delId}`).then(e=>{console.log(e),this.delData={},this.delId="",this.delModal.hide(),this.getCartData(),C.fire(`${e.data.message}`)}).catch(e=>{console.log(e)})},changeQty(e,l){this.disabled=!0;const h={product_id:l,qty:e};this.$http.put(`${g}/v2/api/${y}/cart/${l}`,{data:h}).then(n=>{console.log(n),C.fire(`${n.data.message}`),this.disabled=!1,this.getCartData()}).catch(n=>{console.log(n)})}},mounted(){this.getCartData(),this.delModal=new S(this.$refs.delModal)}},N={class:"container-fuli"},R={class:"row"},U={class:"order-progress pt-4"},L=t("li",{class:"active"},"填寫資料",-1),O={class:"container-md container-fuli d-none"},A={class:"row"},P=t("h2",{class:"text-center"},"訂單確認",-1),z={class:"row"},F={class:"table align-middle"},H=t("thead",null,[t("tr",{class:"text-center"},[t("th",{scope:"col"},"課程名稱"),t("th",{scope:"col"},"授課老師"),t("th",{scope:"col"},"總課程數"),t("th",{scope:"col"},"購買數量"),t("th",{scope:"col"},"價格"),t("th")])],-1),Q={class:"dropdown"},j=["disabled"],G={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},J=["onClick"],K=["onClick"],W={class:"text-center"},X=t("td",null,null,-1),Y=t("td",null,null,-1),Z=t("td",null,null,-1),tt=t("td",null,null,-1),et=t("td",null,null,-1),st={class:"align-bottom"},ot={class:"border-bottom border-primary border-3 mb-0"},lt={class:"ms-1"},at={class:"modal",tabindex:"-1",ref:"delModal"},nt={class:"modal-dialog"},dt={class:"modal-content"},it={class:"modal-header"},ct={key:0,class:"modal-title"},rt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),_t=t("div",{class:"modal-body"},[t("p",null,"確定移出購物車?")],-1),ut={class:"modal-footer"},mt=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);function ht(e,l,h,n,o,u){const p=i("v-field"),b=i("error-message"),v=i("v-form");return d(),r("div",N,[t("div",R,[t("ul",U,[L,t("li",{class:m({active:e.num>=2})},"訂單確認",2),t("li",{class:m({active:e.num>=3})},"完成訂單",2)])]),t("div",O,[t("div",A,[P,t("div",z,[t("table",F,[H,t("tbody",null,[(d(!0),r(D,null,w(o.cartData.carts,(s,c)=>(d(),r("tr",{key:c,class:"text-center"},[t("td",null,[t("h2",null,a(s.product.title),1)]),t("td",null,a(s.product.unit),1),t("td",null,a(s.product.origin_price*s.qty)+"堂",1),t("td",null,[t("div",Q,[t("button",{disabled:o.disabled,class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},a(s.qty),9,j),t("ul",G,[(d(),r(D,null,w(20,(f,$)=>t("li",{key:$},[t("a",{onClick:pt=>u.changeQty(f,s.id),class:"dropdown-item"},a(f),9,J)])),64))])])]),t("td",null,a(s.total),1),t("td",null,[t("button",{type:"button",class:"btn btn-primary rounded-pill",onClick:f=>u.openDelModal(s)},"刪除",8,K)])]))),128)),t("tr",W,[X,Y,Z,tt,et,t("td",st,[t("h2",ot,[x("總金額:NT "),t("span",lt,a(o.cartData.total),1)])])])])]),t("div",at,[t("div",nt,[t("div",dt,[t("div",it,[o.delData.title?(d(),r("h5",ct,a(o.delData.title),1)):E("",!0),rt]),_t,t("div",ut,[mt,t("button",{type:"button",class:"btn btn-primary",onClick:l[0]||(l[0]=s=>u.delCart(o.delData.id))},"確認移出")])])])],512)])])]),_(v,{onSubmit:e.onSubmit},{default:k(({errors:s})=>[_(p,{id:"email",name:"email",type:"email",class:m(["form-control",{"is-invalid":s.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:o.user.email,"onUpdate:modelValue":l[1]||(l[1]=c=>o.user.email=c)},null,8,["class","modelValue"]),_(b,{name:"email",class:"invalid-feedback"})]),_:1},8,["onSubmit"])])}const ft=V(q,[["render",ht]]);export{ft as default};
