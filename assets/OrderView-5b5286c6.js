import{_ as S,M as A,r as f,o as d,c as n,a as e,n as m,F as p,g as b,e as y,t as i,d as h,b as r,w as E,i as V,v as k}from"./index-312f4a9c.js";import{S as x}from"./sweetalert2.all-281a79b7.js";const{VITE_URL:D,VITE_PATH:w}={VITE_PATH:"ssozr",VITE_URL:"https://vue3-course-api.hexschool.io/",BASE_URL:"/vueweek8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},I={data(){return{cartData:[],dalModal:"",delData:{},delId:"",disabled:!1,addressData:"",address:{city:"",areaName:"",index:"",areaList:[]},user:{email:"",address:"",phone:""}}},components:{},methods:{nextBtn(){this.num++},preBtn(){this.num--},getCartData(){this.$http.get(`${D}/v2/api/${w}/cart`).then(t=>{this.cartData=t.data.data}).catch(t=>{console.log(t)})},openDelModal(t){this.deldata={},this.delModal.show(),this.delId=t.id,this.delData=t.product},delCart(){this.$http.delete(`${D}/v2/api/${w}/cart/${this.delId}`).then(t=>{console.log(t),this.delData={},this.delId="",this.delModal.hide(),this.getCartData(),x.fire(`${t.data.message}`)}).catch(t=>{console.log(t)})},changeQty(t,o){this.disabled=!0;const C={product_id:o,qty:t};this.$http.put(`${D}/v2/api/${w}/cart/${o}`,{data:C}).then(_=>{console.log(_),x.fire(`${_.data.message}`),this.disabled=!1,this.getCartData()}).catch(_=>{console.log(_)})},getAddressData(){this.$http.get("https://raw.githubusercontent.com/donma/TaiwanAddressCityAreaRoadChineseEnglishJSON/master/AllData.json").then(t=>{this.addressData=t.data,console.log(t),console.log(this.addressData)}).catch(t=>{console.log(t)})},city(){console.log(this.address.city),this.address.areaName="";const t=this.addressData.findIndex(o=>o.CityName===this.address.city);this.address.index=t,this.address.areaList={...this.addressData[t].AreaList}},isPhone(t){return/^(09)[0-9]{8}$/.test(t)?!0:"需要正確的電話號碼"}},mounted(){this.getCartData(),this.delModal=new A(this.$refs.delModal),this.getAddressData()}},T={class:"container-fuli"},B={class:"row"},L={class:"order-progress pt-4"},U=e("li",{class:"active"},"填寫資料",-1),R={class:"container-md container-fuli d-none"},q={class:"row"},O=e("h2",{class:"text-center"},"訂單確認",-1),P={class:"row"},z={class:"table align-middle"},F=e("thead",null,[e("tr",{class:"text-center"},[e("th",{scope:"col"},"課程名稱"),e("th",{scope:"col"},"授課老師"),e("th",{scope:"col"},"總課程數"),e("th",{scope:"col"},"購買數量"),e("th",{scope:"col"},"價格"),e("th")])],-1),H={class:"dropdown"},Q=["disabled"],j={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},J=["onClick"],G=["onClick"],K={class:"text-center"},W=e("td",null,null,-1),X=e("td",null,null,-1),Y=e("td",null,null,-1),Z=e("td",null,null,-1),$=e("td",null,null,-1),ee={class:"align-bottom"},te={class:"border-bottom border-primary border-3 mb-0"},se={class:"ms-1"},oe={class:"modal",tabindex:"-1",ref:"delModal"},ae={class:"modal-dialog"},le={class:"modal-content"},de={class:"modal-header"},ne={key:0,class:"modal-title"},ie=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),ce=e("div",{class:"modal-body"},[e("p",null,"確定移出購物車?")],-1),re={class:"modal-footer"},ue=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),he={class:"container"},_e={class:"row"},me={class:"row"},pe={class:"mb-3 col-md-6"},be={for:"email",class:"form-label"},ye={key:0,class:"text-danger"},ve={class:"mb-3 col-md-6"},ge={for:"phone",class:"form-label"},fe={key:0,class:"text-danger"},De={class:"input-group mb-3"},we={style:{width:"100%"},for:"地址",class:"form-label"},Ce={key:0,class:"text-danger"},Ve={key:0,value:""},ke=["value"],xe=["disabled"],Ne={key:0,value:""},Me=["value"],Se=e("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function Ae(t,o,C,_,s,u){const v=f("v-field"),g=f("error-message"),N=f("v-form");return d(),n("div",T,[e("div",B,[e("ul",L,[U,e("li",{class:m({active:t.num>=2})},"訂單確認",2),e("li",{class:m({active:t.num>=3})},"完成訂單",2)])]),e("div",R,[e("div",q,[O,e("div",P,[e("table",z,[F,e("tbody",null,[(d(!0),n(p,null,b(s.cartData.carts,(a,l)=>(d(),n("tr",{key:l,class:"text-center"},[e("td",null,[e("h2",null,i(a.product.title),1)]),e("td",null,i(a.product.unit),1),e("td",null,i(a.product.origin_price*a.qty)+"堂",1),e("td",null,[e("div",H,[e("button",{disabled:s.disabled,class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},i(a.qty),9,Q),e("ul",j,[(d(),n(p,null,b(20,(c,M)=>e("li",{key:M},[e("a",{onClick:Ee=>u.changeQty(c,a.id),class:"dropdown-item"},i(c),9,J)])),64))])])]),e("td",null,i(a.total),1),e("td",null,[e("button",{type:"button",class:"btn btn-primary rounded-pill",onClick:c=>u.openDelModal(a)},"刪除",8,G)])]))),128)),e("tr",K,[W,X,Y,Z,$,e("td",ee,[e("h2",te,[y("總金額:NT "),e("span",se,i(s.cartData.total),1)])])])])]),e("div",oe,[e("div",ae,[e("div",le,[e("div",de,[s.delData.title?(d(),n("h5",ne,i(s.delData.title),1)):h("",!0),ie]),ce,e("div",re,[ue,e("button",{type:"button",class:"btn btn-primary",onClick:o[0]||(o[0]=a=>u.delCart(s.delData.id))},"確認移出")])])])],512)])])]),e("div",he,[e("div",_e,[r(N,{onSubmit:t.onSubmit},{default:E(({errors:a})=>[e("div",me,[e("div",pe,[e("label",be,[y("信箱: "),a.email?(d(),n("span",ye,i(a.email),1)):h("",!0)]),r(v,{id:"email",name:"email",type:"email",class:m(["form-control",{"is-invalid":a.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:s.user.email,"onUpdate:modelValue":o[1]||(o[1]=l=>s.user.email=l)},null,8,["class","modelValue"]),r(g,{name:"email",class:"invalid-feedback"})]),e("div",ve,[e("label",ge,[y("手機號碼: "),a.電話?(d(),n("span",fe,i(a.電話),1)):h("",!0)]),r(v,{id:"phone",name:"電話",type:"text",class:m(["form-control",{"is-invalid":a.電話}]),placeholder:"0912345678",rules:u.isPhone,modelValue:s.user.phone,"onUpdate:modelValue":o[2]||(o[2]=l=>s.user.phone=l)},null,8,["class","rules","modelValue"]),r(g,{name:"電話",class:"invalid-feedback"})]),e("div",De,[e("label",we,[y("地址: "),a.地址?(d(),n("span",Ce,i(a.地址),1)):h("",!0)]),V(e("select",{class:"btn btn-outline-secondary",onChange:o[3]||(o[3]=(...l)=>u.city&&u.city(...l)),"onUpdate:modelValue":o[4]||(o[4]=l=>s.address.city=l)},[s.address.city?h("",!0):(d(),n("option",Ve,"請選擇")),(d(!0),n(p,null,b(s.addressData,(l,c)=>(d(),n("option",{value:l.CityName,key:c},i(l.CityName),9,ke))),128))],544),[[k,s.address.city]]),V(e("select",{class:"btn btn-outline-secondary",disabled:!s.address.city,"onUpdate:modelValue":o[5]||(o[5]=l=>s.address.areaName=l)},[s.address.areaName?h("",!0):(d(),n("option",Ne,"請選擇")),(d(!0),n(p,null,b(s.address.areaList,(l,c)=>(d(),n("option",{value:l.AreaName,key:c},i(l.AreaName),9,Me))),128))],8,xe),[[k,s.address.areaName]]),r(v,{id:"地址",name:"地址",type:"text",class:m(["form-control",{"is-invalid":a.地址}]),placeholder:"請輸入 路段 門牌號碼",rules:"required",modelValue:s.user.address,"onUpdate:modelValue":o[6]||(o[6]=l=>s.user.address=l),disabled:!s.address.areaName},null,8,["class","modelValue","disabled"]),r(g,{name:"地址",class:"invalid-feedback"})])]),Se]),_:1},8,["onSubmit"])])])])}const Be=S(I,[["render",Ae]]);export{Be as default};
